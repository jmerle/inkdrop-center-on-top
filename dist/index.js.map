{"version":3,"sources":["../src/index.js"],"names":["windowFocusedCallback","windowCreatedCallback","isFocused","centerWindow","backWindow","frontWindow","backBounds","getBounds","backCenterX","x","Math","round","width","backCenterY","y","height","frontBounds","frontX","frontY","setBounds","onWindowFocused","win","inkdrop","window","onWindowCreated","activate","_","remote","app","on","deactivate","off"],"mappings":";;;;;;;;AAAA;;AAEA,IAAIA,qBAAqB,GAAG,IAA5B;AACA,IAAIC,qBAAqB,GAAG,IAA5B;AAEA,IAAIC,SAAS,GAAG,KAAhB;;AAEA,SAASC,YAAT,CAAsBC,UAAtB,EAAkCC,WAAlC,EAA+C;AAC7C,QAAMC,UAAU,GAAGF,UAAU,CAACG,SAAX,EAAnB;AACA,QAAMC,WAAW,GAAGF,UAAU,CAACG,CAAX,GAAeC,IAAI,CAACC,KAAL,CAAWL,UAAU,CAACM,KAAX,GAAmB,CAA9B,CAAnC;AACA,QAAMC,WAAW,GAAGP,UAAU,CAACQ,CAAX,GAAeJ,IAAI,CAACC,KAAL,CAAWL,UAAU,CAACS,MAAX,GAAoB,CAA/B,CAAnC;AAEA,QAAMC,WAAW,GAAGX,WAAW,CAACE,SAAZ,EAApB;AACA,QAAMU,MAAM,GAAGT,WAAW,GAAGE,IAAI,CAACC,KAAL,CAAWK,WAAW,CAACJ,KAAZ,GAAoB,CAA/B,CAA7B;AACA,QAAMM,MAAM,GAAGL,WAAW,GAAGH,IAAI,CAACC,KAAL,CAAWK,WAAW,CAACD,MAAZ,GAAqB,CAAhC,CAA7B;AAEAV,EAAAA,WAAW,CAACc,SAAZ,CAAsB,EACpB,GAAGH,WADiB;AAEpBP,IAAAA,CAAC,EAAEQ,MAFiB;AAGpBH,IAAAA,CAAC,EAAEI;AAHiB,GAAtB;AAKD;;AAED,SAASE,eAAT,CAAyBC,GAAzB,EAA8B;AAC5BnB,EAAAA,SAAS,GAAGmB,GAAG,KAAKC,OAAO,CAACC,MAA5B;AACD;;AAED,SAASC,eAAT,CAAyBH,GAAzB,EAA8B;AAC5B,MAAInB,SAAJ,EAAe;AACbC,IAAAA,YAAY,CAACmB,OAAO,CAACC,MAAT,EAAiBF,GAAjB,CAAZ;AACD;AACF;;AAEM,SAASI,QAAT,GAAoB;AACzBzB,EAAAA,qBAAqB,GAAG,CAAC0B,CAAD,EAAIL,GAAJ,KAAYD,eAAe,CAACC,GAAD,CAAnD;;AACApB,EAAAA,qBAAqB,GAAG,CAACyB,CAAD,EAAIL,GAAJ,KAAYG,eAAe,CAACH,GAAD,CAAnD;;AAEAM,mBAAOC,GAAP,CAAWC,EAAX,CAAc,sBAAd,EAAsC7B,qBAAtC;;AACA2B,mBAAOC,GAAP,CAAWC,EAAX,CAAc,wBAAd,EAAwC5B,qBAAxC;;AAEAC,EAAAA,SAAS,GAAGoB,OAAO,CAACC,MAAR,CAAerB,SAAf,EAAZ;AACD;;AAEM,SAAS4B,UAAT,GAAsB;AAC3B,MAAI9B,qBAAqB,KAAK,IAA9B,EAAoC;AAClC2B,qBAAOC,GAAP,CAAWG,GAAX,CAAe,sBAAf,EAAuC/B,qBAAvC;;AACAA,IAAAA,qBAAqB,GAAG,IAAxB;AACD;;AAED,MAAIC,qBAAqB,KAAK,IAA9B,EAAoC;AAClC0B,qBAAOC,GAAP,CAAWG,GAAX,CAAe,wBAAf,EAAyC9B,qBAAzC;;AACAA,IAAAA,qBAAqB,GAAG,IAAxB;AACD;AACF","sourcesContent":["import { remote } from 'electron';\n\nlet windowFocusedCallback = null;\nlet windowCreatedCallback = null;\n\nlet isFocused = false;\n\nfunction centerWindow(backWindow, frontWindow) {\n  const backBounds = backWindow.getBounds();\n  const backCenterX = backBounds.x + Math.round(backBounds.width / 2);\n  const backCenterY = backBounds.y + Math.round(backBounds.height / 2);\n\n  const frontBounds = frontWindow.getBounds();\n  const frontX = backCenterX - Math.round(frontBounds.width / 2);\n  const frontY = backCenterY - Math.round(frontBounds.height / 2);\n\n  frontWindow.setBounds({\n    ...frontBounds,\n    x: frontX,\n    y: frontY,\n  });\n}\n\nfunction onWindowFocused(win) {\n  isFocused = win === inkdrop.window;\n}\n\nfunction onWindowCreated(win) {\n  if (isFocused) {\n    centerWindow(inkdrop.window, win);\n  }\n}\n\nexport function activate() {\n  windowFocusedCallback = (_, win) => onWindowFocused(win);\n  windowCreatedCallback = (_, win) => onWindowCreated(win);\n\n  remote.app.on('browser-window-focus', windowFocusedCallback);\n  remote.app.on('browser-window-created', windowCreatedCallback);\n\n  isFocused = inkdrop.window.isFocused();\n}\n\nexport function deactivate() {\n  if (windowFocusedCallback !== null) {\n    remote.app.off('browser-window-focus', windowFocusedCallback);\n    windowFocusedCallback = null;\n  }\n\n  if (windowCreatedCallback !== null) {\n    remote.app.off('browser-window-created', windowCreatedCallback);\n    windowCreatedCallback = null;\n  }\n}\n"],"file":"index.js"}